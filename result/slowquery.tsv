cnt	sum	min	avg	max	sumLock	sumRows	avgRows	db	query
41476	224.260058929	1.0356e-05	0.005406983	0.086164369	0	0	0.0000	isucholar	COMMIT
5264	5.765864772	0.000194037	0.001095339	0.043412655	0.859068	98914	18.7907	isucholar	SELECT `announcements`.`id`, `courses`.`id` AS `course_id`, `courses`.`name` AS `course_name`, `announcements`.`title`, NOT `unread_announcements`.`is_deleted` AS `unread` FROM `announcements` JOIN `courses` ON `announcements`.`course_id` = `courses`.`id` JOIN `registrations` ON `courses`.`id` = `registrations`.`course_id` JOIN `unread_announcements` ON `announcements`.`id` = `unread_announcements`.`announcement_id` WHERE 1=1 AND `unread_announcements`.`user_id` = '01FF6J8XK888G9HQQPGVRBJMHX' AND `registrations`.`user_id` = '01FF6J8XK888G9HQQPGVRBJMHX' ORDER BY `announcements`.`id` DESC LIMIT 21 OFFSET 0
1184	4.915542421	0.000210679	0.00415164	0.045756497	0.189806	42961	36.2846	isucholar	SELECT IFNULL(SUM(`submissions`.`score`), 0) AS `total_score` FROM `users` JOIN `registrations` ON `users`.`id` = `registrations`.`user_id` JOIN `courses` ON `registrations`.`course_id` = `courses`.`id` LEFT JOIN `classes` ON `courses`.`id` = `classes`.`course_id` LEFT JOIN `submissions` ON `users`.`id` = `submissions`.`user_id` AND `submissions`.`class_id` = `classes`.`id` WHERE `courses`.`id` = '01FFV8MQB409SFD52CNBHXSSHQ' GROUP BY `users`.`id`
10654	3.82356538	0.000116773	0.000358885	0.045237425	1.149802	30184	2.8331	isucholar	SELECT `classes`.*, `submissions`.`user_id` IS NOT NULL AS `submitted` FROM `classes` LEFT JOIN `submissions` ON `classes`.`id` = `submissions`.`class_id` AND `submissions`.`user_id` = '01FF6J8XGAQQPRQ964ZFW0GC3H' WHERE `classes`.`course_id` = '01FFV8MQB409SFD52CNBHXSSHQ' ORDER BY `classes`.`part`
38	3.81827509	0.00038958	0.100480923	0.277373278	0.012749	1590	41.8421	isucholar	SELECT IFNULL(SUM(`submissions`.`score` * `courses`.`credit`), 0) / 100 / `credits`.`credits` AS `gpa` FROM `users` JOIN (     SELECT `users`.`id` AS `user_id`, SUM(`courses`.`credit`) AS `credits`     FROM `users`     JOIN `registrations` ON `users`.`id` = `registrations`.`user_id`     JOIN `courses` ON `registrations`.`course_id` = `courses`.`id` AND `courses`.`status` = 'closed'     GROUP BY `users`.`id` ) AS `credits` ON `credits`.`user_id` = `users`.`id` JOIN `registrations` ON `users`.`id` = `registrations`.`user_id` JOIN `courses` ON `registrations`.`course_id` = `courses`.`id` AND `courses`.`status` = 'closed' LEFT JOIN `classes` ON `courses`.`id` = `classes`.`course_id` LEFT JOIN `submissions` ON `users`.`id` = `submissions`.`user_id` AND `submissions`.`class_id` = `classes`.`id` WHERE `users`.`type` = 'student' GROUP BY `users`.`id`
11934	3.755267167	9.2472e-05	0.000314669	0.051066037	1.590305	11928	0.9995	isucholar	SELECT `announcements`.`id`, `courses`.`id` AS `course_id`, `courses`.`name` AS `course_name`, `announcements`.`title`, `announcements`.`message`, NOT `unread_announcements`.`is_deleted` AS `unread` FROM `announcements` JOIN `courses` ON `courses`.`id` = `announcements`.`course_id` JOIN `unread_announcements` ON `unread_announcements`.`announcement_id` = `announcements`.`id` WHERE `announcements`.`id` = '01FFV8N9YCB19A310TTVKXT50C' AND `unread_announcements`.`user_id` = '01FF6J8XKK13NRCE9BYQT7DM2P'
9836	3.51631641	0.000134432	0.000357494	0.020787716	1.012784	0	0.0000	isucholar	UPDATE `submissions` JOIN `users` ON `users`.`id` = `submissions`.`user_id` SET `score` = 68 WHERE `users`.`code` = 'S02115' AND `class_id` = '01FFV8NEVHPM7H63PPZ1HZAS1J'
11930	3.436235769	8.2464e-05	0.000288033	0.021518932	0.871229	0	0.0000	isucholar	UPDATE `unread_announcements` SET `is_deleted` = true WHERE `announcement_id` = '01FFV8N8HS6KM0VMVDV6RZH8XE' AND `user_id` = '01FF6J8XS03R8GXBH1B4C05FMX'
11579	3.354266662	5.5655e-05	0.000289685	0.053288323	0.751795	0	0.0000	isucholar	INSERT INTO `unread_announcements` (`announcement_id`, `user_id`) VALUES ('01FFV8NAX3XZ9V2MYCHAA2HKMW', '01FF6J8XK888G9HQQPGVRBJMHX')
10613	3.336296642	8.3417e-05	0.000314359	0.047531673	0.885661	0	0.0000	isucholar	INSERT INTO `submissions` (`user_id`, `class_id`, `file_name`) VALUES ('01FF6J8XV2WVYA3YT4X3GP5MQ5', '01FFV8N25AC92G6VH5QV3FK334', 'S02980.pdf') ON DUPLICATE KEY UPDATE `file_name` = VALUES(`file_name`)
5324	2.935908031	9.1267e-05	0.000551447	0.01856523	0.397992	5320	0.9992	isucholar	SELECT COUNT(*) FROM `unread_announcements` WHERE `user_id` = '01FF6J8XS03R8GXBH1B4C05FMX' AND NOT `is_deleted`
14384	2.878463465	5.169e-05	0.000200115	0.020397249	1.057525	14383	0.9999	isucholar	SELECT COUNT(*) FROM `registrations` WHERE `course_id` = '01FFV8MQAZH1M5M7F3S6ST4KWY' AND `user_id` = '01FF6J8XPKP85TCHNRC8RSBH5J'
245	2.332720696	0.002181295	0.009521308	0.043313468	0.034091	0	0.0000	isucholar	INSERT INTO `courses` (`id`, `code`, `type`, `name`, `description`, `credit`, `period`, `day_of_week`, `teacher_id`, `keywords`) VALUES ('01FFV8NK9M9AV0M5K2JW6SEPHW', 'M0092', 'major-subjects', '知能化アルゴリズムサイエンス概論', '本講義では出席を毎回取る。成績は出席と課題の提出状況により判断する。', 1, 4, 'thursday', '01FF6J8XFVF5Y3P9DHASB2BBA8', 'アルゴリズム サイエンス')
11187	1.899327189	4.8129e-05	0.000169779	0.008090312	0.812798	11186	0.9999	isucholar	SELECT COUNT(*) FROM `courses` WHERE `id` = '01FFV8MQBTTNDTRRBKJQB7F92P'
41573	1.817108159	7.535e-06	4.3708e-05	0.008258016	0	0	0.0000	isucholar	START TRANSACTION
10615	1.773460644	5.5208e-05	0.000167071	0.012211909	0.713467	10613	0.9998	isucholar	SELECT COUNT(*) FROM `registrations` WHERE `user_id` = '01FF6J8XQKR6EF79RDQSX2PNYC' AND `course_id` = '01FFV8MR2RXN7Q1TZP18668TBH'
10620	1.683398477	4.6681e-05	0.000158512	0.008642166	0.68797	10616	0.9996	isucholar	SELECT `status` FROM `courses` WHERE `id` = '01FFV8MQBAS1RK1G6ZYE60CQW5' FOR SHARE
11066	1.661485016	4.9819e-05	0.000150143	0.014755565	0.667042	11063	0.9997	isucholar	SELECT `submission_closed` FROM `classes` WHERE `id` = '01FFV8N7T1HP14AJXH21QSSBH8' FOR SHARE
5334	1.652327297	7.2282e-05	0.000309772	0.010024379	0.312981	5333	0.9998	isucholar	SELECT COUNT(*) FROM `submissions` WHERE `class_id` = '01FFV8N2V8KF8N50M697FTMTQ1'
2451	1.593533037	7.9978e-05	0.000650156	0.042801323	0.330424	0	0.0000	isucholar	INSERT INTO `registrations` (`course_id`, `user_id`) VALUES ('01FFV8MR1A9DZS67VYRPJ3QDQD', '01FF6J8XXTNGTR7HCMJRM60X1N') ON DUPLICATE KEY UPDATE `course_id` = VALUES(`course_id`), `user_id` = VALUES(`user_id`)
5335	1.174297302	5.6572e-05	0.000220111	0.014302218	0.331458	5178	0.9706	isucholar	SELECT `submissions`.`score` FROM `submissions` WHERE `user_id` = '01FF6J8XKA2KCT5W68QSYK8GT2' AND `class_id` = '01FFV8MVR8NZXJX6DF4NRQ42BF'
6443	1.141245826	4.6279e-05	0.000177129	0.013061764	0.446955	6442	0.9998	isucholar	SELECT * FROM `users` WHERE `id` = '01FF6J8XFV0TPXJCAWFVYA0AM8'
3002	1.016405679	5.6619e-05	0.000338576	0.023437098	0.307109	2999	0.9990	isucholar	SELECT * FROM `courses` WHERE `id` = '01FFV8MQDNN4MGHKBSB423Y0CF' FOR SHARE
888	0.680808553	0.000116358	0.000766676	0.04034974	0.08712	12724	14.3288	isucholar	SELECT `courses`.* FROM `courses` JOIN `registrations` ON `courses`.`id` = `registrations`.`course_id` WHERE `courses`.`status` != 'closed' AND `registrations`.`user_id` = '01FF6J8XP8YKKCPBHXBW31R4V2'
6	0.489804254	0.00417851	0.081634042	0.235852168	0.036843	0	0.0000	isucholar	"INSERT INTO `users` (`id`, `code`, `name`, `hashed_password`, `type`) VALUES
('01FF6J8XFYRAYQ8RQCGQCHHT34','S00000','isucon(学生)','$2a$04$ryz7PlekloOgUSQCFyvPoeo1Q9RYfcrUTj6EvUNSqfDkuIIUVKBWO','student'),
('01FF6J8XFYAFNEX1EPEEQ2NDQB','S00001','渡辺 真美','$2a$04$GYUQPXsxgtOCEEjoSV0wM.Q1mJ6LRi9cIJIUPFT7uPCJ.eZyBM2bG','student'),
('01FF6J8XFY4DE99G3NW36HPBGA','S00002','山崎 匠','$2a$04$efF8V4eGPMhoVlv7OKJqXuGCvIH9ZLGtZvwRYvJ/6tSKHIs4cp8oG','student'),
('01FF6J8XFYB4K4M90JGETZGTR9','S00003','山下 優斗','$2a$04$zbX0X9N.QrMHZCtuk5eUVesaa0GRS0Bgs3FpRnN5XS52d8zTLoX8.','student'),
('01FF6J8XFZ6DG4SX100P3AKTV5','S00004','山田 涼太','$2a$04$ULCP63Vv96B7aAFOpW/aMOaRijTjOtxi0/y3xa4cLyt6yexw8L32.','student'),
('01FF6J8XFZP5W330HGCSW7SD7E','S00005','藤田 友香','$2a$04$dPW6RnSJ2phfBVr2gzzlK.OgGuOx3.iiwzzVzjd9WF1lT.bovUkOq','student'),
('01FF6J8XFZVB3MRCXZ3ZVWRF3C','S00006','宮里 麻美','$2a$04$/oakixGjy5D.UKMV4BwKHeiHDSWYhTzoTtoF2Dp1QFq6mDq7DQoiK','student'),
('01FF6J8XFZEP32QBXGMSVDXA7F','S0000..."
527	0.486019377	0.000199714	0.000922237	0.015158678	0.073447	2131	4.0436	isucholar	SELECT `courses`.*, `users`.`name` AS `teacher` FROM `courses` JOIN `users` ON `courses`.`teacher_id` = `users`.`id` WHERE 1=1 AND `courses`.`period` = 6 AND `courses`.`day_of_week` = 'thursday' ORDER BY `courses`.`code` LIMIT 21 OFFSET 0
528	0.48354048	0.000189273	0.000915796	0.022402297	0.083751	10087	19.1042	isucholar	SELECT `courses`.*, `users`.`name` AS `teacher` FROM `courses` JOIN `users` ON `courses`.`teacher_id` = `users`.`id` WHERE 1=1 AND `courses`.`type` = 'liberal-arts' ORDER BY `courses`.`code` LIMIT 21 OFFSET 0
1184	0.383274022	9.301e-05	0.000323711	0.005938329	0.075485	5337	4.5076	isucholar	SELECT * FROM `classes` WHERE `course_id` = '01FFV8MQF3SYSKT3VX403C6A16' ORDER BY `part` DESC
530	0.273543934	8.6658e-05	0.00051612	0.040463468	0.049735	0	0.0000	isucholar	INSERT INTO `announcements` (`id`, `course_id`, `title`, `message`) VALUES ('01FFV8PFBMP86ZCC5Q7FQ359W8', '01FFV8MR1A9DZS67VYRR6ENJWB', '講義追加: 図学史A 第五回講義', '講義が新しく追加されました: 図学史A 第五回講義\n今日のMTG-Room IDは 159-976-3834 です。課題は講義中に出題するクイズへの回答を提出してください。')
530	0.220412046	9.7606e-05	0.000415871	0.007108037	0.057382	11574	21.8377	isucholar	SELECT `users`.* FROM `users` JOIN `registrations` ON `users`.`id` = `registrations`.`user_id` WHERE `registrations`.`course_id` = '01FFV8MQBTTNDTRRBKJV2T4YQD'
142	0.212288768	0.0002519	0.001494991	0.011056078	0.018487	13	0.0915	isucholar	SELECT `courses`.*, `users`.`name` AS `teacher` FROM `courses` JOIN `users` ON `courses`.`teacher_id` = `users`.`id` WHERE 1=1 AND `users`.`name` = '相澤 悠太' ORDER BY `courses`.`code` LIMIT 21 OFFSET 0
459	0.201483058	0.000126758	0.00043896	0.006540593	0.036044	9958	21.6950	isucholar	SELECT `submissions`.`user_id`, `submissions`.`file_name`, `users`.`code` AS `user_code` FROM `submissions` JOIN `users` ON `users`.`id` = `submissions`.`user_id` WHERE `class_id` = '01FFV8NKKSCKZM4Z3KYMYJTV8A'
540	0.196080227	7.244e-05	0.000363111	0.01051446	0.041656	0	0.0000	isucholar	INSERT INTO `classes` (`id`, `course_id`, `part`, `title`, `description`) VALUES ('01FFV8NXVNFXSB796E4ZS7QHR7', '01FFV8MQFKK0JBFDVWV9DCH8Y6', 3, '法学科学C 第三回講義', '課題は講義の内容についてあなたが調べたことについて500字以上1000字以内でまとめてください。')
444	0.170897272	9.1434e-05	0.000384903	0.013947824	0.059921	443	0.9977	isucholar	SELECT `courses`.*, `users`.`name` AS `teacher` FROM `courses` JOIN `users` ON `courses`.`teacher_id` = `users`.`id` WHERE `courses`.`id` = '01FF6N3NA2J712CAH9XAC2BG5E'
136	0.150728295	0.000209113	0.001108296	0.016607544	0.026129	803	5.9044	isucholar	SELECT `courses`.*, `users`.`name` AS `teacher` FROM `courses` JOIN `users` ON `courses`.`teacher_id` = `users`.`id` WHERE 1=1 AND ((1=1 AND `courses`.`name` LIKE '%人間文化%') OR (1=1 AND `courses`.`keywords` LIKE '%人間文化%')) ORDER BY `courses`.`code` LIMIT 21 OFFSET 0
459	0.083364855	0.00012842	0.000181622	0.000539317	0.027064	0	0.0000	isucholar	UPDATE `classes` SET `submission_closed` = true WHERE `id` = '01FFV8NT5XZGKEKYJFDX57F31W'
2	0.080464984	0.035737013	0.040232492	0.044727971	0.00029	0	0.0000	isucholar	"CREATE TABLE `courses`
(
    `id`          CHAR(26) PRIMARY KEY,
    `code`        VARCHAR(255) UNIQUE                                           NOT NULL,
    `type`        ENUM ('liberal-arts', 'major-subjects')                       NOT NULL,
    `name`        VARCHAR(255)                                                  NOT NULL,
    `description` TEXT                                                          NOT NULL,
    `credit`      TINYINT UNSIGNED                                              NOT NULL,
    `period`      TINYINT UNSIGNED                                              NOT NULL,
    `day_of_week` ENUM ('monday', 'tuesday', 'wednesday', 'thursday', 'friday') NOT NULL,
    `teacher_id`  CHAR(26)                                                      NOT NULL,
    `keywords`    TEXT                                                          NOT NULL,
    `status`      ENUM ('registration', 'in-progress', 'closed')                NOT NULL DEFAULT 'registration',
    CONSTRAINT FK_courses_teacher..."
2	0.073822241	0.036235924	0.03691112	0.037586317	0.000284	0	0.0000	isucholar	"CREATE TABLE `registrations`
(
    `course_id` CHAR(26),
    `user_id`   CHAR(26),
    PRIMARY KEY (`course_id`, `user_id`),
    CONSTRAINT FK_registrations_course_id FOREIGN KEY (`course_id`) REFERENCES `courses` (`id`),
    CONSTRAINT FK_registrations_user_id FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
);

CREATE TABLE `classes`
(
    `id`                CHAR(26) PRIMARY KEY,
    `course_id`         CHAR(26)         NOT NULL,
    `part`              TINYINT UNSIGNED NOT NULL,
    `title`             VARCHAR(255)     NOT NULL,
    `description`       TEXT             NOT NULL,
    `submission_closed` TINYINT(1)       NOT NULL DEFAULT false,
    UNIQUE KEY `idx_classes_course_id_part` (`course_id`, `part`),
    CONSTRAINT FK_classes_course_id FOREIGN KEY (`course_id`) REFERENCES `courses` (`id`)
);

CREATE TABLE `submissions`
(
    `user_id`   CHAR(26)     NOT NULL,
    `class_id`  CHAR(26)     NOT NULL,
    `file_name` VARCHAR(255) NOT NULL,
    `score`     TINYINT UNSIGNED,
    PRIMARY KEY (`user_i..."
2	0.070688708	0.028102357	0.035344354	0.042586351	0.000279	0	0.0000	isucholar	"-- master data
CREATE TABLE `users`
(
    `id`              CHAR(26) PRIMARY KEY,
    `code`            CHAR(6) UNIQUE              NOT NULL,
    `name`            VARCHAR(255)                NOT NULL,
    `hashed_password` BINARY(60)                  NOT NULL,
    `type`            ENUM ('student', 'teacher') NOT NULL
);

CREATE TABLE `courses`
(
    `id`          CHAR(26) PRIMARY KEY,
    `code`        VARCHAR(255) UNIQUE                                           NOT NULL,
    `type`        ENUM ('liberal-arts', 'major-subjects')                       NOT NULL,
    `name`        VARCHAR(255)                                                  NOT NULL,
    `description` TEXT                                                          NOT NULL,
    `credit`      TINYINT UNSIGNED                                              NOT NULL,
    `period`      TINYINT UNSIGNED                                              NOT NULL,
    `day_of_week` ENUM ('monday', 'tuesday', 'wednesday', 'thursday', 'friday') NOT NULL,
 ..."
2	0.069926428	0.030598604	0.034963214	0.039327824	0.000268	0	0.0000	isucholar	"CREATE TABLE `unread_announcements`
(
    `announcement_id` CHAR(26)   NOT NULL,
    `user_id`         CHAR(26)   NOT NULL,
    `is_deleted`      TINYINT(1) NOT NULL DEFAULT false,
    PRIMARY KEY (`announcement_id`, `user_id`),
    CONSTRAINT FK_unread_announcements_announcement_id FOREIGN KEY (`announcement_id`) REFERENCES `announcements` (`id`),
    CONSTRAINT FK_unread_announcements_user_id FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
)"
294	0.069349974	6.1119e-05	0.000235884	0.005023562	0.02984	294	1.0000	isucholar	SELECT `code` FROM `users` WHERE `id` = '01FF6J8XFX77A97EQA9F2Q07T0'
2	0.069245121	0.033152303	0.03462256	0.036092818	0.000248	0	0.0000	isucholar	"CREATE TABLE `announcements`
(
    `id`         CHAR(26) PRIMARY KEY,
    `course_id`  CHAR(26)     NOT NULL,
    `title`      VARCHAR(255) NOT NULL,
    `message`    TEXT         NOT NULL,
    CONSTRAINT FK_announcements_course_id FOREIGN KEY (`course_id`) REFERENCES `courses` (`id`)
);

CREATE TABLE `unread_announcements`
(
    `announcement_id` CHAR(26)   NOT NULL,
    `user_id`         CHAR(26)   NOT NULL,
    `is_deleted`      TINYINT(1) NOT NULL DEFAULT false,
    PRIMARY KEY (`announcement_id`, `user_id`),
    CONSTRAINT FK_unread_announcements_announcement_id FOREIGN KEY (`announcement_id`) REFERENCES `announcements` (`id`),
    CONSTRAINT FK_unread_announcements_user_id FOREIGN KEY (`user_id`) REFERENCES `users` (`id`)
)"
2	0.068191871	0.03175157	0.034095935	0.036440301	0.000292	0	0.0000	isucholar	"CREATE TABLE `submissions`
(
    `user_id`   CHAR(26)     NOT NULL,
    `class_id`  CHAR(26)     NOT NULL,
    `file_name` VARCHAR(255) NOT NULL,
    `score`     TINYINT UNSIGNED,
    PRIMARY KEY (`user_id`, `class_id`),
    CONSTRAINT FK_submissions_user_id FOREIGN KEY (`user_id`) REFERENCES `users` (`id`),
    CONSTRAINT FK_submissions_class_id FOREIGN KEY (`class_id`) REFERENCES `classes` (`id`)
);

CREATE TABLE `announcements`
(
    `id`         CHAR(26) PRIMARY KEY,
    `course_id`  CHAR(26)     NOT NULL,
    `title`      VARCHAR(255) NOT NULL,
    `message`    TEXT         NOT NULL,
    CONSTRAINT FK_announcements_course_id FOREIGN KEY (`course_id`) REFERENCES `courses` (`id`)
);

CREATE TABLE `unread_announcements`
(
    `announcement_id` CHAR(26)   NOT NULL,
    `user_id`         CHAR(26)   NOT NULL,
    `is_deleted`      TINYINT(1) NOT NULL DEFAULT false,
    PRIMARY KEY (`announcement_id`, `user_id`),
    CONSTRAINT FK_unread_announcements_announcement_id FOREIGN KEY (`announcement_id`) REFERENCE..."
460	0.067646461	6.7908e-05	0.000147057	0.001859422	0.029088	459	0.9978	isucholar	SELECT COUNT(*) FROM `classes` WHERE `id` = '01FFV8NWZPJQXAAWHD9WKVGG3G' FOR UPDATE
173	0.066944611	0.000127078	0.000386963	0.002262261	0.012765	0	0.0000	isucholar	UPDATE `courses` SET `status` = 'closed' WHERE `id` = '01FFV8MR37WE899YWZPA1KW6Z5'
2	0.064787223	0.031511408	0.032393611	0.033275815	0.000299	0	0.0000	isucholar	"CREATE TABLE `classes`
(
    `id`                CHAR(26) PRIMARY KEY,
    `course_id`         CHAR(26)         NOT NULL,
    `part`              TINYINT UNSIGNED NOT NULL,
    `title`             VARCHAR(255)     NOT NULL,
    `description`       TEXT             NOT NULL,
    `submission_closed` TINYINT(1)       NOT NULL DEFAULT false,
    UNIQUE KEY `idx_classes_course_id_part` (`course_id`, `part`),
    CONSTRAINT FK_classes_course_id FOREIGN KEY (`course_id`) REFERENCES `courses` (`id`)
);

CREATE TABLE `submissions`
(
    `user_id`   CHAR(26)     NOT NULL,
    `class_id`  CHAR(26)     NOT NULL,
    `file_name` VARCHAR(255) NOT NULL,
    `score`     TINYINT UNSIGNED,
    PRIMARY KEY (`user_id`, `class_id`),
    CONSTRAINT FK_submissions_user_id FOREIGN KEY (`user_id`) REFERENCES `users` (`id`),
    CONSTRAINT FK_submissions_class_id FOREIGN KEY (`class_id`) REFERENCES `classes` (`id`)
);

CREATE TABLE `announcements`
(
    `id`         CHAR(26) PRIMARY KEY,
    `course_id`  CHAR(26)     NOT NULL,
    ..."
174	0.053487203	7.1673e-05	0.000307397	0.011814156	0.012326	174	1.0000	isucholar	SELECT COUNT(*) FROM `courses` WHERE `id` = '01FFV8MR2S242D778CJ8X0FW22' FOR UPDATE
2	0.043428879	0.019845994	0.021714439	0.023582885	0.000356	0	0.0000	isucholar	"-- CREATEと逆順
DROP TABLE IF EXISTS `unread_announcements`;
DROP TABLE IF EXISTS `announcements`;
DROP TABLE IF EXISTS `submissions`;
DROP TABLE IF EXISTS `classes`;
DROP TABLE IF EXISTS `registrations`;
DROP TABLE IF EXISTS `courses`;
DROP TABLE IF EXISTS `users`;

-- master data
CREATE TABLE `users`
(
    `id`              CHAR(26) PRIMARY KEY,
    `code`            CHAR(6) UNIQUE              NOT NULL,
    `name`            VARCHAR(255)                NOT NULL,
    `hashed_password` BINARY(60)                  NOT NULL,
    `type`            ENUM ('student', 'teacher') NOT NULL
);

CREATE TABLE `courses`
(
    `id`          CHAR(26) PRIMARY KEY,
    `code`        VARCHAR(255) UNIQUE                                           NOT NULL,
    `type`        ENUM ('liberal-arts', 'major-subjects')                       NOT NULL,
    `name`        VARCHAR(255)                                                  NOT NULL,
    `description` TEXT                                                          NOT NULL,
..."
2	0.037155086	0.016614355	0.018577543	0.020540731	0.000136	0	0.0000	isucholar	"DROP TABLE IF EXISTS `submissions`;
DROP TABLE IF EXISTS `classes`;
DROP TABLE IF EXISTS `registrations`;
DROP TABLE IF EXISTS `courses`;
DROP TABLE IF EXISTS `users`;

-- master data
CREATE TABLE `users`
(
    `id`              CHAR(26) PRIMARY KEY,
    `code`            CHAR(6) UNIQUE              NOT NULL,
    `name`            VARCHAR(255)                NOT NULL,
    `hashed_password` BINARY(60)                  NOT NULL,
    `type`            ENUM ('student', 'teacher') NOT NULL
);

CREATE TABLE `courses`
(
    `id`          CHAR(26) PRIMARY KEY,
    `code`        VARCHAR(255) UNIQUE                                           NOT NULL,
    `type`        ENUM ('liberal-arts', 'major-subjects')                       NOT NULL,
    `name`        VARCHAR(255)                                                  NOT NULL,
    `description` TEXT                                                          NOT NULL,
    `credit`      TINYINT UNSIGNED                                              NOT NULL,
    `period`..."
2	0.036236212	0.016844115	0.018118106	0.019392097	0.000115	0	0.0000	isucholar	"DROP TABLE IF EXISTS `registrations`;
DROP TABLE IF EXISTS `courses`;
DROP TABLE IF EXISTS `users`;

-- master data
CREATE TABLE `users`
(
    `id`              CHAR(26) PRIMARY KEY,
    `code`            CHAR(6) UNIQUE              NOT NULL,
    `name`            VARCHAR(255)                NOT NULL,
    `hashed_password` BINARY(60)                  NOT NULL,
    `type`            ENUM ('student', 'teacher') NOT NULL
);

CREATE TABLE `courses`
(
    `id`          CHAR(26) PRIMARY KEY,
    `code`        VARCHAR(255) UNIQUE                                           NOT NULL,
    `type`        ENUM ('liberal-arts', 'major-subjects')                       NOT NULL,
    `name`        VARCHAR(255)                                                  NOT NULL,
    `description` TEXT                                                          NOT NULL,
    `credit`      TINYINT UNSIGNED                                              NOT NULL,
    `period`      TINYINT UNSIGNED                                              ..."
2	0.035098708	0.016593819	0.017549354	0.018504889	0.0002	0	0.0000	isucholar	"DROP TABLE IF EXISTS `courses`;
DROP TABLE IF EXISTS `users`;

-- master data
CREATE TABLE `users`
(
    `id`              CHAR(26) PRIMARY KEY,
    `code`            CHAR(6) UNIQUE              NOT NULL,
    `name`            VARCHAR(255)                NOT NULL,
    `hashed_password` BINARY(60)                  NOT NULL,
    `type`            ENUM ('student', 'teacher') NOT NULL
);

CREATE TABLE `courses`
(
    `id`          CHAR(26) PRIMARY KEY,
    `code`        VARCHAR(255) UNIQUE                                           NOT NULL,
    `type`        ENUM ('liberal-arts', 'major-subjects')                       NOT NULL,
    `name`        VARCHAR(255)                                                  NOT NULL,
    `description` TEXT                                                          NOT NULL,
    `credit`      TINYINT UNSIGNED                                              NOT NULL,
    `period`      TINYINT UNSIGNED                                              NOT NULL,
    `day_of_week` ENUM ('mon..."
2	0.033446383	0.014542703	0.016723191	0.01890368	0.000195	0	0.0000	isucholar	"DROP TABLE IF EXISTS `classes`;
DROP TABLE IF EXISTS `registrations`;
DROP TABLE IF EXISTS `courses`;
DROP TABLE IF EXISTS `users`;

-- master data
CREATE TABLE `users`
(
    `id`              CHAR(26) PRIMARY KEY,
    `code`            CHAR(6) UNIQUE              NOT NULL,
    `name`            VARCHAR(255)                NOT NULL,
    `hashed_password` BINARY(60)                  NOT NULL,
    `type`            ENUM ('student', 'teacher') NOT NULL
);

CREATE TABLE `courses`
(
    `id`          CHAR(26) PRIMARY KEY,
    `code`        VARCHAR(255) UNIQUE                                           NOT NULL,
    `type`        ENUM ('liberal-arts', 'major-subjects')                       NOT NULL,
    `name`        VARCHAR(255)                                                  NOT NULL,
    `description` TEXT                                                          NOT NULL,
    `credit`      TINYINT UNSIGNED                                              NOT NULL,
    `period`      TINYINT UNSIGNED              ..."
2	0.032251294	0.015764343	0.016125647	0.016486951	0.00018	0	0.0000	isucholar	"DROP TABLE IF EXISTS `users`;

-- master data
CREATE TABLE `users`
(
    `id`              CHAR(26) PRIMARY KEY,
    `code`            CHAR(6) UNIQUE              NOT NULL,
    `name`            VARCHAR(255)                NOT NULL,
    `hashed_password` BINARY(60)                  NOT NULL,
    `type`            ENUM ('student', 'teacher') NOT NULL
);

CREATE TABLE `courses`
(
    `id`          CHAR(26) PRIMARY KEY,
    `code`        VARCHAR(255) UNIQUE                                           NOT NULL,
    `type`        ENUM ('liberal-arts', 'major-subjects')                       NOT NULL,
    `name`        VARCHAR(255)                                                  NOT NULL,
    `description` TEXT                                                          NOT NULL,
    `credit`      TINYINT UNSIGNED                                              NOT NULL,
    `period`      TINYINT UNSIGNED                                              NOT NULL,
    `day_of_week` ENUM ('monday', 'tuesday', 'wednesday', 't..."
2	0.030376656	0.015137232	0.015188328	0.015239424	0.000206	0	0.0000	isucholar	"DROP TABLE IF EXISTS `announcements`;
DROP TABLE IF EXISTS `submissions`;
DROP TABLE IF EXISTS `classes`;
DROP TABLE IF EXISTS `registrations`;
DROP TABLE IF EXISTS `courses`;
DROP TABLE IF EXISTS `users`;

-- master data
CREATE TABLE `users`
(
    `id`              CHAR(26) PRIMARY KEY,
    `code`            CHAR(6) UNIQUE              NOT NULL,
    `name`            VARCHAR(255)                NOT NULL,
    `hashed_password` BINARY(60)                  NOT NULL,
    `type`            ENUM ('student', 'teacher') NOT NULL
);

CREATE TABLE `courses`
(
    `id`          CHAR(26) PRIMARY KEY,
    `code`        VARCHAR(255) UNIQUE                                           NOT NULL,
    `type`        ENUM ('liberal-arts', 'major-subjects')                       NOT NULL,
    `name`        VARCHAR(255)                                                  NOT NULL,
    `description` TEXT                                                          NOT NULL,
    `credit`      TINYINT UNSIGNED                              ..."
151	0.025371144	7.1957e-05	0.00016802	0.002418725	0.008538	150	0.9934	isucholar	SELECT * FROM `users` WHERE `code` = 'S04055'
36	0.022970386	0.000180601	0.000638066	0.003837568	0.003241	1144	31.7778	isucholar	SELECT `courses`.* FROM `registrations` JOIN `courses` ON `registrations`.`course_id` = `courses`.`id` WHERE `user_id` = '01FF6J8XZ68XTD9VR2DW2D55C2'
59	0.016365433	0.000179654	0.00027738	0.000533559	0.006186	150	2.5424	isucholar	SELECT `announcements`.`id`, `courses`.`id` AS `course_id`, `courses`.`name` AS `course_name`, `announcements`.`title`, NOT `unread_announcements`.`is_deleted` AS `unread` FROM `announcements` JOIN `courses` ON `announcements`.`course_id` = `courses`.`id` JOIN `registrations` ON `courses`.`id` = `registrations`.`course_id` JOIN `unread_announcements` ON `announcements`.`id` = `unread_announcements`.`announcement_id` WHERE 1=1 AND `announcements`.`course_id` = '01FFV8MNS8DXG0A2TRVXVTGPN2' AND `unread_announcements`.`user_id` = '01FF6J8XQFYQNKWM7KRS23X4GD' AND `registrations`.`user_id` = '01FF6J8XQFYQNKWM7KRS23X4GD' ORDER BY `announcements`.`id` DESC LIMIT 21 OFFSET 0
2	0.013978136	0.006515775	0.006989068	0.007462361	0.000814	0	0.0000	isucholar	"INSERT INTO `courses` (`id`, `code`, `type`, `name`, `description`, `credit`, `period`, `day_of_week`, `teacher_id`, `keywords`, `status`) VALUES
('01FF6N3NA2J712CAH9X8SRRK8R', 'A0001', 'liberal-arts', '社会モデリング導入', '本講義では課題提出をもって出席の代わりとする。成績は出席と課題の提出状況により判断する。', 2, 1, 'monday', '01FF6J8XFSWM3X28NM0WXZQ8QK', '社会 モデリング', 'closed'),
('01FF6N3NA2J712CAH9XAC2BG5E', 'A0002', 'major-subjects', '言語システム演習', '本講義では出席をランダムな講義回で取る。成績は出席と課題の提出状況により判断する。', 2, 2, 'monday', '01FF6J8XFSCAT6ADYNN5G33QQC', '言語 システム', 'closed'),
('01FF6N3NA2J712CAH9XB3WZX2D', 'A0003', 'major-subjects', '先進マネジメント化学導入', '本講義では出席をランダムな講義回で取る。成績は課題の提出状況により判断する。', 3, 3, 'monday', '01FF6J8XFSRFYE6GGAB4Y3F94P', 'マネ..."
2	0.011269683	0.005064784	0.005634841	0.006204899	0.000265	0	0.0000	isucholar	"INSERT INTO `unread_announcements` VALUES
('01FF4RXEKS0DG2EG20D6N5CNRQ','01FF4RXEKS0DG2EG20CN2GJB8K',true),
('01FF4RXEKS0DG2EG20DA1W34X3','01FF4RXEKS0DG2EG20CN2GJB8K',true),
('01FF4RXEKS0DG2EG20DAGTWP61','01FF4RXEKS0DG2EG20CN2GJB8K',true),
('01FF4RXEKS0DG2EG20DBT4PFHF','01FF4RXEKS0DG2EG20CN2GJB8K',true),
('01FF4RXEKS0DG2EG20DDPCS14P','01FF4RXEKS0DG2EG20CN2GJB8K',false),
('01FF4RXEKS0DG2EG20D6N5CNRQ','01FF4RXEKS0DG2EG20CQVX6FV0',true),
('01FF4RXEKS0DG2EG20DA1W34X3','01FF4RXEKS0DG2EG20CQVX6FV0',true),
('01FF4RXEKS0DG2EG20DAGTWP61','01FF4RXEKS0DG2EG20CQVX6FV0',true),
('01FF4RXEKS0DG2EG20DBT4PFHF','01FF4RXEKS0DG2EG20CQVX6FV0',true),
('01FF4RXEKS0DG2EG20DDPCS14P','01FF4RXEKS0DG2EG20CQVX6FV0',true),
('01FF4RXEKS0DG2EG20D6N5CNRQ','01FF4RXEKS0DG2EG20CTTAPEVH',true),
('01FF4RXEKS0DG2EG20DA1W34X3','01FF4RXEKS0DG2EG20CTTAPEVH',true),
('01FF4RXEKS0DG2EG20DAGTWP61','01FF4RXEKS0DG2EG20CTTAPEVH',true),
('01FF4RXEKS0DG2EG20DBT4PFHF','01FF4RXEKS0DG2EG20CTTAPEVH',true),
('01FF4RXEKS0DG2EG20DDPCS14P','01FF4RXEKS0DG2EG20CTTAP..."
110	0.01084276	1.8891e-05	9.857e-05	0.002579886	0	0	0.0000	isucholar	SET time_zone='+00:00'
2	0.010753815	0.005216961	0.005376907	0.005536854	0.000274	0	0.0000	isucholar	"INSERT INTO `registrations` VALUES
('01FF4RXEKS0DG2EG20CWPQ60M3','01FF4RXEKS0DG2EG20CN2GJB8K'),
('01FF4RXEKS0DG2EG20CWPQ60M3','01FF4RXEKS0DG2EG20CQVX6FV0'),
('01FF4RXEKS0DG2EG20CWPQ60M3','01FF4RXEKS0DG2EG20CTTAPEVH'),
('01FF4RXEKS0DG2EG20CYAYCCGM','01FF4RXEKS0DG2EG20CN2GJB8K');

INSERT INTO `classes` VALUES
('01FF4RXEKS0DG2EG20CWPQ60M3','01FF4RXEKS0DG2EG20CWPQ60M3',1,'ISUCON3 予選','本日はISUCON3 予選の過去問を実施します。課題は講義中に出題するクイズへの回答を提出してください。',0),
('01FF4RXEKS0DG2EG20CYAYCCGM','01FF4RXEKS0DG2EG20CWPQ60M3',2,'ISUCON4 予選','本日はISUCON4 予選の過去問を実施します。課題は講義中に出題するクイズへの回答を提出してください。',0),
('01FF4RXEKS0DG2EG20D23EQZRY','01FF4RXEKS0DG2EG20CWPQ60M3',3,'ISUCON5 予選','本日はISUCON5 予選の過去問を実施します。課題は講義中に出題するクイズへの回答を提出してください。',0),
('01FF4RXEKS0DG2EG20D4APKY18','01FF4R..."
2	0.010020246	0.004099027	0.005010123	0.005921219	0.000276	0	0.0000	isucholar	"INSERT INTO `classes` VALUES
('01FF4RXEKS0DG2EG20CWPQ60M3','01FF4RXEKS0DG2EG20CWPQ60M3',1,'ISUCON3 予選','本日はISUCON3 予選の過去問を実施します。課題は講義中に出題するクイズへの回答を提出してください。',0),
('01FF4RXEKS0DG2EG20CYAYCCGM','01FF4RXEKS0DG2EG20CWPQ60M3',2,'ISUCON4 予選','本日はISUCON4 予選の過去問を実施します。課題は講義中に出題するクイズへの回答を提出してください。',0),
('01FF4RXEKS0DG2EG20D23EQZRY','01FF4RXEKS0DG2EG20CWPQ60M3',3,'ISUCON5 予選','本日はISUCON5 予選の過去問を実施します。課題は講義中に出題するクイズへの回答を提出してください。',0),
('01FF4RXEKS0DG2EG20D4APKY18','01FF4RXEKS0DG2EG20CWPQ60M3',4,'ISUCON6 予選','本日はISUCON6 予選の過去問を実施します。課題は講義中に出題するクイズへの回答を提出してください。',0),
('01FF4RXEKS0DG2EG20D61YCEM1','01FF4RXEKS0DG2EG20CWPQ60M3',5,'ISUCON7 予選','本日はISUC..."
2	0.00999374	0.004856376	0.00499687	0.005137364	0.000254	0	0.0000	isucholar	"INSERT INTO `submissions` VALUES
('01FF4RXEKS0DG2EG20CN2GJB8K','01FF4RXEKS0DG2EG20CWPQ60M3','S99999_1st.pdf',72),
('01FF4RXEKS0DG2EG20CN2GJB8K','01FF4RXEKS0DG2EG20CYAYCCGM','S99999_2nd.pdf',65),
('01FF4RXEKS0DG2EG20CN2GJB8K','01FF4RXEKS0DG2EG20D23EQZRY','S99999_3rd.pdf',88),
('01FF4RXEKS0DG2EG20CN2GJB8K','01FF4RXEKS0DG2EG20D4APKY18','S99999_4th.pdf',54),
('01FF4RXEKS0DG2EG20CN2GJB8K','01FF4RXEKS0DG2EG20D61YCEM1','S99999_5th.pdf',60),
('01FF4RXEKS0DG2EG20CQVX6FV0','01FF4RXEKS0DG2EG20CWPQ60M3','S99998_1st.pdf',12),
('01FF4RXEKS0DG2EG20CQVX6FV0','01FF4RXEKS0DG2EG20CYAYCCGM','S99998_2nd.pdf',8),
('01FF4RXEKS0DG2EG20CQVX6FV0','01FF4RXEKS0DG2EG20D23EQZRY','S99998_3rd.pdf',26),
('01FF4RXEKS0DG2EG20CQVX6FV0','01FF4RXEKS0DG2EG20D4APKY18','S99998_4th.pdf',33),
('01FF4RXEKS0DG2EG20CQVX6FV0','01FF4RXEKS0DG2EG20D61YCEM1','S99998_5th.pdf',16),
('01FF4RXEKS0DG2EG20CTTAPEVH','01FF4RXEKS0DG2EG20CWPQ60M3','S99997_1st.pdf',90),
('01FF4RXEKS0DG2EG20CTTAPEVH','01FF4RXEKS0DG2EG20CYAYCCGM','S99997_2nd.pdf',82),
('01FF4RXEKS0DG2E..."
2	0.009382705	0.004651253	0.004691352	0.004731452	0.000266	0	0.0000	isucholar	"INSERT INTO `announcements` VALUES
('01FF4RXEKS0DG2EG20D6N5CNRQ','01FF4RXEKS0DG2EG20CWPQ60M3','講義追加: ISUCON3 予選','講義が新しく追加されました: ISUCON3 予選\n本日はISUCON3 予選の過去問を実施します。課題は講義中に出題するクイズへの回答を提出してください。'),
('01FF4RXEKS0DG2EG20DA1W34X3','01FF4RXEKS0DG2EG20CWPQ60M3','講義追加: ISUCON4 予選','講義が新しく追加されました: ISUCON4 予選\n本日はISUCON4 予選の過去問を実施します。課題は講義中に出題するクイズへの回答を提出してください。'),
('01FF4RXEKS0DG2EG20DAGTWP61','01FF4RXEKS0DG2EG20CWPQ60M3','講義追加: ISUCON5 予選','講義が新しく追加されました: ISUCON5 予選\n本日はISUCON5 予選の過去問を実施します。課題は講義中に出題するクイズへの回答を提出してください。'),
('01FF4RXEKS0DG2EG20DBT4PFHF','01FF4RXEKS0DG2EG20CWPQ60M3','講義追加: ISUCON6 予選','講義が新..."
2	0.009317513	0.004270163	0.004658756	0.00504735	0.000172	0	0.0000	isucholar	"INSERT INTO `courses` VALUES
('01FF4RXEKS0DG2EG20CWPQ60M3','X0001','major-subjects','ISUCON演習第一','この科目ではISUCONの過去問を通してサーバのチューニングアップを学びます。課題は講義中に出題するクイズへの回答を提出してください。本講義の成績は課題の提出状況により判断します。',1,1,'monday','01FF4RXEKS0DG2EG20CKDWS7CC','ISUCON SpeedUP','in-progress'),
('01FF4RXEKS0DG2EG20CYAYCCGM','X0002','major-subjects','ISUCON演習第二','この科目ではISUCONの過去問を通してサーバのチューニングアップを学びます。課題は講義中に出題するクイズへの回答を提出してください。本講義の成績は課題の提出状況により判断します。',1,1,'tuesday','01FF4RXEKS0DG2EG20CKDWS7CC','ISUCON SpeedUP','in-progress'),
('01FF4RXEKS0DG2EG20D23EQZRY','X0003','major-subjects','ISUCON演習第三','この科目ではISUCONの過去問を通してサーバのチューニングアッ..."
15	0.00825031	0.00025913	0.00055002	0.000762351	0.001052	301	20.0667	isucholar	SELECT `courses`.*, `users`.`name` AS `teacher` FROM `courses` JOIN `users` ON `courses`.`teacher_id` = `users`.`id` WHERE 1=1 ORDER BY `courses`.`code` LIMIT 21 OFFSET 220
18	0.002493104	2.8188e-05	0.000138505	0.001921489	0	0	0.0000	isucholar	ROLLBACK
3	0.000783519	0.000237139	0.000261173	0.000306154	0.000211	52	17.3333	isucholar	SELECT `courses`.*, `users`.`name` AS `teacher` FROM `courses` JOIN `users` ON `courses`.`teacher_id` = `users`.`id` WHERE 1=1 AND `courses`.`status` = 'closed' ORDER BY `courses`.`code` LIMIT 21 OFFSET 0
1	0.000243443	0.000243443	0.000243443	0.000243443	0.000107	1	1.0000	isucholar	SELECT `courses`.*, `users`.`name` AS `teacher` FROM `courses` JOIN `users` ON `courses`.`teacher_id` = `users`.`id` WHERE 1=1 AND `courses`.`type` = 'liberal-arts' AND `courses`.`credit` = 2 AND `users`.`name` = '橋本 真紀' AND `courses`.`period` = 4 AND `courses`.`day_of_week` = 'wednesday' AND ((1=1 AND `courses`.`name` LIKE '%椅子%') OR (1=1 AND `courses`.`keywords` LIKE '%椅子%')) AND `courses`.`status` = 'closed' ORDER BY `courses`.`code` LIMIT 21 OFFSET 0
1	0.000221951	0.000221951	0.000221951	0.000221951	5.8e-05	12	12.0000	isucholar	SELECT `courses`.*, `users`.`name` AS `teacher` FROM `courses` JOIN `users` ON `courses`.`teacher_id` = `users`.`id` WHERE 1=1 AND `courses`.`credit` = 1 ORDER BY `courses`.`code` LIMIT 21 OFFSET 0
1	0.00019996	0.00019996	0.00019996	0.00019996	6.9e-05	8	8.0000	isucholar	SELECT `courses`.*, `users`.`name` AS `teacher` FROM `courses` JOIN `users` ON `courses`.`teacher_id` = `users`.`id` WHERE 1=1 AND `courses`.`period` = 1 ORDER BY `courses`.`code` LIMIT 21 OFFSET 0
1	0.000195467	0.000195467	0.000195467	0.000195467	5.9e-05	7	7.0000	isucholar	SELECT `courses`.*, `users`.`name` AS `teacher` FROM `courses` JOIN `users` ON `courses`.`teacher_id` = `users`.`id` WHERE 1=1 AND `courses`.`day_of_week` = 'monday' ORDER BY `courses`.`code` LIMIT 21 OFFSET 0
1	0.000114176	0.000114176	0.000114176	0.000114176	4e-05	1	1.0000	isucholar	SELECT * FROM `classes` WHERE `course_id` = '01FFV8MPETWAQEVQWJ3YW1CKZW' AND `part` = 1
1	0.000113046	0.000113046	0.000113046	0.000113046	3.8e-05	1	1.0000	isucholar	SELECT * FROM `courses` WHERE `code` = 'L0011'
